local_settings:
    dependencies:
        - pvt.lzwdgc.polygon4.data_manager.data_manager: master
        - pvt.cppan.demo.eigen: 3
        - pvt.egorpugin.primitives.filesystem: master
        - pvt.egorpugin.primitives.executor: master
        - pvt.cppan.demo.unicode.icu.i18n: "*"
        - pvt.cppan.demo.taywee.args: "*"

    #build_dir_type: local
    use_shared_libs: false
    rc_enabled: false
    builds:
        vs_release:
            generator: Visual Studio 15 2017
        vs_release64:
            generator: Visual Studio 15 2017 Win64
        vs_preview:
            c_compiler: c:/Program Files (x86)/Microsoft Visual Studio/Preview/Community/VC/Tools/MSVC/14.11.25325/bin/HostX64/x86/cl.exe
            cxx_compiler: c:/Program Files (x86)/Microsoft Visual Studio/Preview/Community/VC/Tools/MSVC/14.11.25325/bin/HostX64/x86/cl.exe
            cxx_flags: /std:c++17
        gcc8:
            c_compiler: gcc-8
            cxx_compiler: g++-8
            #generator: Ninja
        macos:
            c_compiler: clang
            cxx_compiler: clang++
        vs_llvm:
            toolset: LLVM-vs2014
        win_clang_ninja:
            generator: Ninja
            c_compiler: clang-cl
            cxx_compiler: clang-cl
            use_cache: false

add_directories:
    - d:/dev/primitives
    - dir: d:/dev/ue4/AIM/DataManager
      name: data_manager

common_settings:
    c++: 17

projects:
    common:
        type: lib
        static_only: true
        root_dir: src/common
        dependencies:
            - name: pvt.egorpugin.primitives.filesystem
              version: master
              local: primitives.filesystem
            - name: pvt.egorpugin.primitives.sw.main
              version: master
              local: primitives.sw.main

    db_add_language:
        root_dir: src/db_add_language
        dependencies:
            - common
            - name: pvt.lzwdgc.polygon4.data_manager.data_manager
              version: master
              local: data_manager.data_manager
            - name: pvt.egorpugin.primitives.executor
              version: master
              local: primitives.executor

    db_extractor:
        root_dir: src/db_extractor
        dependencies:
            - common

    unpaker:
        root_dir: src/unpaker

    mmm_extractor:
        root_dir: src/mmm_extractor
        dependencies:
            - common
            - name: pvt.lzwdgc.polygon4.data_manager.data_manager
              version: master
              local: data_manager.data_manager

    mmo_extractor:
        root_dir: src/mmo_extractor
        dependencies:
            - common
            - name: pvt.lzwdgc.polygon4.data_manager.data_manager
              version: master
              local: data_manager.data_manager

    mmp_extractor:
        root_dir: src/mmp_extractor
        dependencies:
            - common

    model:
        type: lib
        static_only: true
        root_dir: src/model
        dependencies:
            - common
            - pvt.cppan.demo.unicode.icu.i18n: "*"

    mod_converter:
        root_dir: src/mod_converter
        dependencies:
            - model
        post_sources: |
            set(FBX_SDK_ROOT "d:/arh/apps/Autodesk/FBX/FBX SDK/2019.0/")
            target_link_libraries(${this} PUBLIC
                debug "${FBX_SDK_ROOT}/lib/vs2015/x86/debug/libfbxsdk-md.lib"
                optimized "${FBX_SDK_ROOT}/lib/vs2015/x86/release/libfbxsdk-md.lib"
            )
            target_include_directories(${this} PUBLIC
                "${FBX_SDK_ROOT}/include"
            )

    mod_reader:
        root_dir: src/mod_reader
        dependencies:
            - model

    mpj_loader:
        root_dir: src/mpj_loader
        dependencies:
            - common

    tm_converter:
        root_dir: src/tm_converter
        dependencies:
            - common

    name_generator:
        root_dir: src/name_generator

    save_loader:
        root_dir: src/save_loader
        dependencies:
            - common

    script2txt:
        root_dir: src/script2txt
        files: .*
        dependencies:
            - common
            - name: pvt.lzwdgc.polygon4.data_manager.schema
              version: master
              local: data_manager.schema
            - name: pvt.cppan.demo.lexxmark.winflexbison.flex
              version: master
              ref: flex
              condition:
                  - WIN32
            - name: pvt.cppan.demo.lexxmark.winflexbison.bison
              version: master
              ref: bison
              condition:
                  - WIN32
        post_target: |
            cppan_flex_bison_pair(LALR1_CPP_VARIANT_PARSER script2txt)


















